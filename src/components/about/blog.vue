<template lang="html">
	<main id="main" class="main">
		<transition name="fade" mode="out-in">
			<div v-if="!PostsIsLoaded" key = "loading" class="loader">
				<div class="loader__spinner"></div>
				<h2 class="loader__title">Загружаем посты...</h2>
			</div>
			<transition-group v-else
				name="fade-fast"
				tag = "div"
				class="container"
				>
				<blog-post v-for = "blogItem in Blogs" :key="blogItem.time"
					:title = "blogItem.title"
					:time = "blogItem.time"
					:content = "blogItem.content"
					>
				</blog-post>
			</transition-group>
		</transition>
	</main>
</template>

<script>

	import blogPost from '../templates/blog-post';

	export default {
  		name: "blog",
		components: { blogPost },
		created() {
			this.$store.dispatch('getPosts' , 'posts.json');
		},
		computed: {
			Blogs() {
				return this.$store.state.Posts
			},
			PostsIsLoaded() {
				return this.$store.state.PostsIsLoaded
			}
		}
	}

</script>

<style lang="scss">

	@import "../../scss/partials/_layout";
	@import "../../scss/partials/_mixins";
	@import "../../scss/partials/_variables";

	@import "../../scss/SpinThatShit/loaders.scss";

	.blog {
		margin-top: 80px;
	}
	.loader {
		display: flex;
		flex-flow: column wrap;
		justify-content: center;
		align-items: center;
		height: 100vh;
		&__spinner {
			@include loader07($size: 15px, $duration: 1s);
		}
		&__title {
			margin-top: 40px;
		}
	}

</style>
